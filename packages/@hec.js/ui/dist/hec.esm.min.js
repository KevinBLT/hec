function j(t){let n=t.matchAll(/([^ {}\s]+)/g),a={meta:{},text:t,prop:null};for(let e of n)if(e[1].includes("=")){let r=e[1].split("=");a.meta[r[0]]=r[1].replaceAll(/'|"/g,"")}else a.prop=e[1];return a}var E={};var S=new WeakMap,P=t=>S.get(t),z=t=>S.delete(t),R=t=>S.has(t),L=(t,n)=>{let a=P(t);a&&typeof a=="object"?S.set(t,Object.assign(a,n)):S.set(t,n)},p=t=>typeof t=="function"?p(t()):t;function h(t,n){let a=n.split(".");if(!n)return t;for(let e of a){if(["loading","error"].includes(e)&&t?.loading&&t?.error)return t[e];if(m(t)){let r=t()?.[e];if(m(r)){let s=new AbortController,o=b(r());r.subscribe({next:o},{signal:s.signal});let i=c=>{s.abort(),m(c[e])?(s=new AbortController,c[e].subscribe({next:o},{signal:s.signal}),o(c[e]())):o(c[e])};t.subscribe({next:i}),t=o}else t=t.map(s=>s&&s[e])}else if(typeof t=="function")t=p(t);else if(typeof t[e]<"u")typeof t[e]=="function"&&!m(t[e])?t=t[e].bind(t):t=t[e];else return null}return t}function W(t,n){let a=n.split(".");if(!n)return!1;for(let e of a){if(["loading","error"].includes(e)&&t?.loading&&t?.error)return t[e];if(typeof t=="function")t=p(t);else if(typeof t[e]<"u")t=t[e];else return!1}return!0}function b(t=null,n={}){let a=[],e=o=>{t=o;for(let i of a)i.next(t)};function r(){return arguments.length&&t!==arguments[0]&&e(arguments[0]),t}let s=(o,i=null)=>{a.push(o),i?.signal.addEventListener("abort",()=>{let c=a.indexOf(o);c>-1&&a.splice(c,1)},{once:!0})};return Object.assign(r,{signal:n.name??"",toString:()=>t.toString(),set:o=>t=o,update:e,subscribe:s,map:o=>{let i=b(o(t)),c=new AbortController,l=i.subscribe;return s({next:u=>i(o(u))},{signal:c.signal}),Object.assign(i,{set:()=>null,subscribe:(u,d)=>{l(u,d),d?.signal.addEventListener("abort",()=>c.abort())}})},filter:o=>{let i=b(o(t)?t:null);return s({next:c=>o(c)?i(c):null}),Object.assign(i,{set:()=>null})}})}function et(t,n=[],a=null){for(let e of n)e.subscribe({next:()=>a=t(a)});return t(a)}function pt(t,n=[],a=null){let e=b(null);return e(et(r=>e(t(r)),n,a)),e}function nt(t,n=null){let a=b(n),e=b(!0),r=b(null),s=async()=>{try{a(await t()),e(!1)}catch(o){o(o)}return a()};return s(),Object.assign(a,{loading:e,error:r,refetch:s})}function dt(t,n,a=null){let e=nt(()=>n(p(t)),a);return m(t)&&t.subscribe({next:()=>e.refetch()}),e}var m=t=>t&&t.subscribe;var rt=b({}),A=b(location.pathname);var w=document.querySelector('head meta[name="route"]');w||(w=document.createElement("meta"),w.name="route",w.content=location.pathname,document.head.append(w));var k=()=>{w.content="",A(location.pathname),rt(Object.fromEntries(new URLSearchParams(location.search))),w.content=w.content||location.pathname};window.addEventListener("popstate",k);window.addEventListener("hashchange",k);var at=window.history.pushState,ot=window.history.replaceState;window.history.pushState=function(n,a,e){at.call(window.history,n,a,e),k()};window.history.replaceState=function(n,a,e){ot.call(window.history,n,a,e),k()};var O=new WeakMap,st=new MutationObserver(t=>{for(let n of t)O.has(n.target)&&O.get(n.target)()}),B={select:"[data-match]",run:t=>{let n=t.dataset.match,a=s=>s.replace(/index\.*[a-z0-9]*$/gm,"");function e(){return a(new URL(t.dataset.route||t.getAttribute("href"),location.href).pathname)}let r=()=>{e()==a(location.pathname)?t.classList.add(n):t.classList.remove(n)};A.subscribe({next:r}),O.set(t,r),st.observe(t,{attributes:!0,attributeFilter:["href","data-route"]}),r(),t.removeAttribute("data-match")}};var T={number:t=>t.valueAsNumber,date:t=>t.valueAsDate,text:t=>t.value,checkbox:t=>t.checked,"":t=>t.value},q={select:"[data-bind],[name]",run:(t,n)=>{let a=t.getAttribute("name")||t.dataset.bind,e=h(n,a);if(e){let r=s=>{t.type=="checkbox"?t.checked=s:t.value=s};r(p(e)),m(e)&&(e.subscribe({next:r}),t.addEventListener("input",()=>e(T[t.type]?.(t)??t.value)),t.addEventListener("change",()=>e(T[t.type]?.(t)??t.value)))}}};var N=new WeakMap,H=new IntersectionObserver(t=>{for(let n of t)if(n.isIntersecting&&N.has(n.target)){for(let a of N.get(n.target))a();N.delete(n.target),H.unobserve(n.target)}},{rootMargin:"256px"});function y(t){return new Promise(n=>{let a=N.get(t)??[];a.push(n),N.set(t,a),H.observe(t)})}var C=new WeakSet,_={select:"[data-include]",run:(t,n)=>{if(C.has(t)||t.children.length)return;C.add(t);let a=t.hasAttribute("data-lazy")&&t.closest("[hidden]"),e=async()=>{t.dispatchEvent(new CustomEvent("::load",{bubbles:!0}));let r=await fetch(t.dataset.include,{headers:{accept:"text/html,text/*"}});if(r.ok){let s=await r.text();t.dispatchEvent(new CustomEvent("::loaded",{bubbles:!0})),t.innerHTML=s;for(let o of t.childNodes)g(o,n);t.removeAttribute("data-include"),t.removeAttribute("data-lazy")}};t.hasAttribute("data-lazy")?y(t).then(e):e()}};var I=new WeakSet,U={select:"[data-for]",run:(t,n,a)=>{if(I.has(t))return;let e=t.dataset.for.replace("let","").split("of"),r=e[0].split(","),s=e.at(-1).trim(),o=r[0].trim()==s?"__e":r[0].trim(),i=r[1]?.trim()??"__i",c=h(n,s),l=document.createComment(t.dataset.for);t.replaceWith(l),C.add(t);let u=()=>{let f=l;for(;(f=f.nextSibling)&&(f instanceof HTMLElement&&f.dataset.for==t.dataset.for);)f=f.previousSibling,f.nextSibling.remove()},d=f=>{u();for(let x=0,v=l;x<f.length;x++){let M=t.cloneNode(!0),tt=Object.assign({},n,{[o]:f[x],[i]:x});I.add(M),v.after(g(M,tt)),v=v.nextSibling}};d(p(c)),m(c)&&c.subscribe({next:d}),a()}};var F={select:"[data-if]",run:(t,n)=>{let a=h(n,t.dataset.if),e=document.createComment("if: "+t.dataset.if);t.replaceWith(e);let r=s=>{!t.parentNode&&s?(t.hidden=!1,e.after(t)):t.localName!="link"&&t.remove()};r(p(a)),m(a)&&a.subscribe({next:r})}};var V=new WeakSet,$={select:"[data-lazy]",run:(t,n,a)=>{if(V.has(t)||!t.childNodes.length)return;V.add(t);let e=t.closest("[hidden]"),r=t.dataset.lazy,s=()=>{for(let o of t.childNodes)g(o,n);t.removeAttribute("data-lazy")};r&&(t.addEventListener("::load",()=>t.classList.add(r),{once:!0}),t.addEventListener("::loaded",()=>t.classList.remove(r),{once:!0})),y(t).then(s),a()}};var D={select:"[data-on]",run:(t,n)=>{let a=e=>{let r=e.split(":"),s=r[0].trim(),o=r.at(-1).trim(),i=h(n,o);i&&t.addEventListener(s,i)};for(let e of t.dataset.on.split(","))a(e)}};var K=t=>{let n=document.createElement("link");Object.assign(n,t),n.rel="preload",document.head.append(n)};var G=new WeakSet,J={select:"[data-preload]",run:t=>{if(G.has(t)||t.hidden)return;G.add(t);let n=()=>{let a=t.dataset.preload.split(",");for(let e of a){let r=e.split(":");K({href:r[0],as:r[1]??"fetch"})}};t.hasAttribute("data-lazy")?y(t).then(n):n()}};var it=t=>{let n=t.dataset.route;for(;t=t.parentElement;)t.dataset.route&&(n=t.dataset.route+n);return n.replaceAll(/\/+/g,"/")},Q={select:"[data-route]",run:async t=>{"URLPattern"in window||await import("https://kevinblt.github.io/hec/packages/@hec.js/ui/lib/src/plugins.js");let n=it(t),a=new URLPattern({pathname:n}),e=document.createComment("route: "+n);t.replaceWith(e);let r=()=>{let s=location.href.replace(/index\.*[a-z0-9]*$/gm,"");if(!t.parentNode&&a.test(s)){t.hidden=!1,e.after(t);let o=document.querySelector('head meta[name="route"]');o&&(o.content=a.pathname)}else t.localName!="link"&&t.remove()};A.subscribe({next:r}),r()}};var X=[U,F,Q,J,_,D,q,B,$];var Y={};function ie(t,n={}){t instanceof URL&&(t=t.host==location.host?t.pathname:t.toString());let a=document.querySelector(`template[name="${t}"]`);if(!a){let e=document.querySelector('head meta[name="template-path"]');return Y[t]??=new Promise(async r=>{a=document.createElement("template"),a.setAttribute("id",t.toString()),a.innerHTML=await fetch(e?.content?.replaceAll("[name]",t.toString())??t).then(s=>s.text()),document.body.append(a),r(a)}),Y[t].then(r=>g(r.content.cloneNode(!0),n))}return g(a.content.cloneNode(!0),n)}function le(t,n={}){let a=document.createElement("template");return a.dataset.name="anonymous",a.innerHTML=t,g(a.content.cloneNode(!0),n)}function g(t,n={}){let a=(r,s)=>{let o=r.match(/{{[^}]+}}/g).map(j),i=r,c=()=>{r=i;for(let l of o){let u=p(l.value);r=r.replace(l.text,u??"<null>")}return r};for(let l of o){let u=h(n,l.prop);if(m(u)){let d=u;for(let f in l.meta)if(E[f]){let x=E[f];d=d.map(v=>x({value:v,key:l.prop,param:l.meta[f],options:l.meta}))}l.value=d,d.subscribe({next:()=>s(c())})}else{let d=u;for(let f in l.meta)if(E[f]){let x=E[f];d=x({value:p(u),key:l.prop,param:l.meta[f],options:l.meta})}l.value=()=>d}}s(c())},e=r=>{let s=!1;if(!R(r)){if(r.nodeName=="#document-fragment"&&L(r,n),r instanceof HTMLElement){let o=r.getAttributeNames();L(r,n);for(let i of X)r.matches(i.select)&&i.run(r,n,()=>s=!0);if(s)return;for(let i of o){let c=r.getAttribute(i);c?.includes("{{")?a(c,l=>{l=l.trim().replace(/ +/," "),l==="<null>"?r.removeAttribute(i):r.setAttribute(i,l)}):r.localName.includes("-")&&W(n,c)&&r.setAttribute(i,`@parent.${c}`)}}else if(r instanceof Text&&r.textContent.includes("{{")){let o=r.textContent.split(/{{|}}/g);for(let i=0,c=r,l;i<o.length;i++)l=document.createTextNode(o[i]),i%2!=0&&a(`{{${o[i]}}}`,u=>l.data=u.replaceAll("<null>","")),c.after(l),c=l;r.remove()}for(let o of r.childNodes)e(o)}};return e(t),t}function pe(t,n,a){customElements.define(t,class extends HTMLElement{static observedAttributes=Object.keys(n).map(e=>e.toLowerCase());#e=Object.fromEntries(Object.entries(n).map(e=>[e[0],b(e[1])]));#t={};#n=!1;on(e,r,s=null){this.addEventListener(e,r,s)}querySelector(e){return this.shadowRoot.querySelector(e)}querySelectorAll(e){return this.shadowRoot.querySelectorAll(e)}async connectedCallback(){if(this.hasAttribute("data-lazy")&&await y(this),this.dispatchEvent(new CustomEvent("::load",{bubbles:!0})),this.#n){this.dispatchEvent(new CustomEvent("::loaded",{bubbles:!0})),this.dispatchEvent(new CustomEvent("::mount"));return}let e=this.shadowRoot??this.attachShadow({mode:"open"}),r=a(this.#e,this);(o=>{L(this,P(o)),this.dispatchEvent(new CustomEvent("::loaded",{bubbles:!0})),e.append(o),this.#n=!0,this.#t["::attributes"]=new AbortController;for(let i in n)this.hasAttribute(i)||this.setAttribute(i,n[i].toString()),this.#e[i].subscribe({next:c=>this.setAttribute(i,c.toString())},{signal:this.#t["::attributes"].signal});this.dispatchEvent(new CustomEvent("::mount"))})(r instanceof Promise?await r:r)}disconnectedCallback(){z(this);for(let e in this.#t)this.#t[e].abort(),delete this.#t[e];this.dispatchEvent(new CustomEvent("::unmount"))}#r(e=""){e=e.toLowerCase();for(let r in this.#e)if(r.toLowerCase()==e)return[n[r],this.#e[r]];return[null,null]}attributeChangedCallback(e,r,s){let[o,i]=this.#r(e);if(s.startsWith("@parent.")){let c=this.parentNode.host||this.parentNode,l=s.slice(8),u=h(P(c),l)??h(P(this),l);m(u)?(this.#t[o]?.abort(),this.#t[o]=new AbortController,i(p(u)),u.subscribe({next:i},{signal:this.#t[o].signal})):i(u)}else i(typeof o=="number"?parseFloat(s):s)}})}var Z=new WeakMap;function be(t,n=null){document.dispatchEvent(new CustomEvent(t,{detail:n}))}function ge(t,n){let a=e=>n(e.detail);Z.set(n,a),document.addEventListener(t,a)}function xe(t){return new Promise(n=>{let a=e=>n(e.detail);document.addEventListener(t,a,{once:!0})})}function we(t,n){document.removeEventListener(t,Z.get(n))}export{pe as component,z as deletePropsOf,et as effect,be as emit,j as expression,p as f,W as hasProp,R as hasProps,m as isSignal,pt as memo,we as off,ge as on,xe as once,E as pipes,X as plugins,h as prop,P as propsOf,nt as resource,dt as resourceBy,L as setPropsOf,b as signal,ie as templateByName,g as templateByNode,le as templateByString};
