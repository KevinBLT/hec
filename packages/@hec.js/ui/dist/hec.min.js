(()=>{var ht=Object.create;var T=Object.defineProperty;var gt=Object.getOwnPropertyDescriptor;var bt=Object.getOwnPropertyNames;var xt=Object.getPrototypeOf,yt=Object.prototype.hasOwnProperty;var wt=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var vt=(t,e)=>{for(var n in e)T(t,n,{get:e[n],enumerable:!0})},St=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of bt(e))!yt.call(t,a)&&a!==n&&T(t,a,{get:()=>e[a],enumerable:!(r=gt(e,a))||r.enumerable});return t};var At=(t,e,n)=>(n=t!=null?ht(xt(t)):{},St(e||!t||!t.__esModule?T(n,"default",{value:t,enumerable:!0}):n,t));var W={};vt(W,{component:()=>j,componentSelector:()=>_,componentUpdate:()=>y,components:()=>k,effect:()=>G,emit:()=>I,executeNodeAttributesTemplate:()=>ft,expression:()=>B,f:()=>d,hasProp:()=>Ct,isSignal:()=>p,memo:()=>Et,off:()=>kt,on:()=>U,once:()=>Nt,page:()=>zt,pipes:()=>v,plugins:()=>H,preload:()=>qt,prop:()=>g,provider:()=>Pt,resource:()=>J,resourceBy:()=>Mt,signal:()=>h,templateByName:()=>_t,templateByNode:()=>b,templateByString:()=>jt,view:()=>Wt});function B(t){let e=t.matchAll(/([^ {}\s]+)/g),n={meta:{},text:t,prop:null};for(let r of e)if(r[1].includes("=")){let a=r[1].split("=");n.meta[a[0]]=a[1].replaceAll(/'|"/g,"")}else n.prop=r[1];return n}var v={};var V=new WeakMap;function I(t,e=null){document.dispatchEvent(new CustomEvent(t,{detail:e}))}function U(t,e){let n=r=>e(r.detail);V.set(e,n),document.addEventListener(t,n)}function Nt(t){return new Promise(e=>{let n=r=>e(r.detail);document.addEventListener(t,n,{once:!0})})}function kt(t,e){document.removeEventListener(t,V.get(e))}var Q={items:new Map,setItem(t,e){this.items.set(t,e?.toString())},get length(){return this.items.keys().length},key(t){return Array.from(this.items.values()).at(t)},clear(){this.items.clear()},getItem(t){return this.items.get(t)},removeItem(t){this.items.delete(t)}},N=new Map;function Lt(t){try{let e=window[t+"Storage"];return typeof e.length=="number"?e:Q}catch{return Q}}window.addEventListener("storage",t=>{if(!N.has(t.key))return;let e=N.get(t.key),n=t.storageArea.getItem(t.key);typeof n=="string"&&n!=="undefined"&&e.update(JSON.parse(n))});function h(t=null,e={}){if(e.id&&N.has(e.id))return N.get(e.id);let n=[],r=e.storage&&Lt(e.storage),a=s=>{t=s,r&&r.setItem(e.id,JSON.stringify(t));for(let c of n)c.next(t)};function o(){return arguments.length&&t!==arguments[0]&&a(arguments[0]),t}let i=(s,c=null)=>{n.push(s),c?.signal.addEventListener("abort",()=>{let u=n.indexOf(s);u>-1&&n.splice(u,1)},{once:!0})};if(r){let s=r.getItem(e.id);a(typeof s=="string"&&s!=="undefined"?JSON.parse(s):t)}let l=Object.assign(o,{id:e.id,storage:e.storage,toString:()=>t?.toString(),set:s=>t=s,update:a,subscribe:i,map:s=>{let c=h(s(t)),u=new AbortController,m=c.subscribe;return i({next:f=>c(s(f))},{signal:u.signal}),Object.assign(c,{set:()=>null,subscribe:(f,x)=>{m(f,x),x?.signal.addEventListener("abort",()=>u.abort())}})},filter:s=>{let c=h(s(t)?t:null);return i({next:u=>s(u)?c(u):null}),Object.assign(c,{set:()=>null})}});return e.id&&N.set(e.id,l),l}function G(t,e=[],n=null){for(let r of e)r.subscribe({next:()=>n=t(n)});return t(n)}function Et(t,e=[],n=null){let r=h(null);return r(G(a=>r(t(a)),e,n)),r}function J(t,e=null){let n=h(e),r=h("loaded"),a=async()=>{if(r()!="pending"){try{r("pending"),n(await t()),r("loaded"),delete n.error}catch(o){r("error"),n.error=o}return n()}};return a(),Object.assign(n,{state:r,refetch:a})}function Mt(t,e,n=null){let r=J(()=>e(d(t)),n);return p(t)&&t.subscribe({next:()=>r.refetch()}),r}function p(t){return t&&t.subscribe}function Pt(t,e=[]){function n(){let r=h(null),a=null,o=null,i=(l,s)=>{a=l,o=s,r(t(l,o))};for(let l of e)l.subscribe({next:()=>r(t(a,o))});return Object.assign({provide:i},r)}return n}var d=t=>typeof t=="function"?d(t()):t;function g(t,e){let n=e.split(".");if(!e)return t;if(!t)return null;for(let r of n){if(["state"].includes(r)&&t?.state)return t[r];if(p(t)){let a=t()?.[r];if(p(a)){let o=new AbortController,i=h(a());a.subscribe({next:i},{signal:o.signal});let l=s=>{o.abort(),p(s[r])?(o=new AbortController,s[r].subscribe({next:i},{signal:o.signal}),i(s[r]())):i(s[r])};t.subscribe({next:l}),t=i}else t=t.map(o=>o&&o[r])}else if(typeof t=="function")t=d(t);else if(typeof t[r]<"u")typeof t[r]=="function"&&!p(t[r])?t=t[r].bind(t):t=t[r];else return}return t}function Ct(t,e){let n=e.split(".");if(!e||!t)return!1;for(let r of n){if(["loading","error"].includes(r)&&t?.loading&&t?.error)return t[r];if(typeof t=="function")t=d(t);else if(typeof t[r]<"u")t=t[r];else return!1}return!0}var _="[data-component], [data-view], [data-page]",k=new Map,y=new WeakMap,Ot=new MutationObserver(t=>{for(let e of t)y.has(e.target)&&y.get(e.target)(e.attributeName)});function j(t,e,n){k.set(t,async(r,a)=>{let o={},i=Array.from(r.childNodes),l=c=>{let u=r.getAttribute(c);for(let m in o)m.toLowerCase()==c&&o[m](typeof e[m]=="number"?parseFloat(u):u)};for(let c in e){let u=r.getAttribute(c);if(typeof u=="string"&&u.startsWith("@")){let m=g(a,u.substring(1));o[c]=p(m)?m:h(m)}else o[c]=h(typeof e[c]=="number"?parseFloat(u):u),o[c].subscribe({next:m=>m?r.setAttribute(c,m):r.removeAttribute(c)})}Ot.observe(r,{attributeFilter:Object.keys(e).map(c=>c.toLowerCase())}),y.set(r,l);let s=n(o,r);if(s instanceof Promise&&(s=await s),r.append(s),i.length){let c=r.querySelector("slot"),u=document.createComment("children/"),m=document.createComment("/children");c?c.replaceWith(u,...i,m):r.append(u,...i)}r.dispatchEvent(new CustomEvent("::mount"))}),I("::component/"+t)}var Wt=j,zt=j;var L=new WeakMap,E=new WeakMap,D=new IntersectionObserver(t=>{for(let e of t)if(e.isIntersecting&&L.has(e.target))for(let n of L.get(e.target))n(),L.delete(e.target),D.unobserve(e.target)},{rootMargin:"256px"});new MutationObserver(t=>{for(let e of t){let n=a=>{for(let o of a){if(y.has(o)&&o.dispatchEvent(new CustomEvent("::mount")),E.has(o)){let i=E.get(o);for(;i.length;)i.shift()()}n(o.childNodes)}},r=a=>{for(let o of a)y.has(o)&&o.dispatchEvent(new CustomEvent("::unmount"))};n(e.addedNodes),r(e.removedNodes)}}).observe(document,{childList:!0,subtree:!0});function S(t){return new Promise(e=>{let n=L.get(t)??[];n.push(e),L.set(t,n),D.observe(t)})}function M(t){return new Promise(e=>{let n=E.get(t)??[];t.getRootNode()==document&&queueMicrotask(()=>e()),n.push(e),E.set(t,n)})}var Rt=h({}),P=h(location.pathname),K=window.history.pushState,Tt=window.history.replaceState,q={updateQueued:!1},C=document.querySelector('head meta[name="route"]')||document.createElement("meta");C.name="route";C.content=location.pathname;document.head.append(C);var X=[],Z=new WeakMap;function Bt(t,e){let n=Array.from(t.path.matchAll(/\:/g)).length*25,r=Array.from(e.path.matchAll(/\:/g)).length*25;return n+=Array.from(t.path.matchAll(/\*/g)).length*150,r+=Array.from(e.path.matchAll(/\*/g)).length*150,n-r}function $(t){let e=t.node,n=t.path,r=t.placeholder,a=e.parentElement??r?.parentElement,o=a?.closest("[data-route]"),i=Z.get(o),l=i?.pattern?.pathname,s=i?.group??X;if(a?.getRootNode()!==document)return M(r).then(()=>$(t));t.group=[],Z.set(e,t),l&&(n=n=="/"?"":n,n=l.replaceAll(/[^\/a-zA-Z0-9]+$/gm,"")+n.replaceAll(/^[^\/a-zA-Z0-9]+/gm,"")),n=n.replaceAll(/\/+/g,"/").replace(/\/$/m,""),t.pattern=new URLPattern({pathname:n||"/"}),s.push(t),s.sort(Bt),q.updateQueued||(q.updateQueued=!0,queueMicrotask(w))}function w(t=location.href){t=t.replace(/index\.*[a-z0-9]*$/gm,"");let e=!1,n=r=>{let a=!1;for(let o of r){let i=o.pattern.test(t);o.update(!a&&i),!a&&i&&(a=!0,o.group.length?n(o.group):(e=!0,C.content=o.pattern.pathname))}return e};return q.updateQueued=!1,n(X)?(P(t),Rt(Object.fromEntries(new URLSearchParams(location.search)))):w(P()),e}var It=t=>{let e=t.target.closest("a")?.href,n=new URL(e,location.href);e&&n.hostname==location.hostname&&w(e)&&(K.call(window.history,null,null,e),t.preventDefault())};window.addEventListener("popstate",()=>w());window.addEventListener("hashchange",()=>w());window.addEventListener("click",It);window.history.pushState=function(e,n,r){K.call(window.history,e,n,r),w(r.toString())};window.history.replaceState=function(e,n,r){Tt.call(window.history,e,n,r),w(r.toString())};var Y={select:t=>t.matches("[data-if], [data-if-not]"),run:(t,e)=>{let n=t.dataset.if||t.dataset.ifNot,r=g(e,n),a=!!t.dataset.ifNot,o=document.createComment((a?"if not:":"if: ")+n),i=F(t,o,e,a);t.replaceWith(o),i(d(r)),t.removeAttribute("data-group"),p(r)&&r.subscribe({next:i})}};function Ut(t,e){if("group"in t.dataset&&t instanceof HTMLTemplateElement){let n=Array.from(t.content.childNodes);for(let r of n)b(r,e);return n}return[t]}function F(t,e,n,r=!1){let a=Ut(t,n),o=!!t.closest("head");return i=>{if(i=r?!i:i,!t.parentNode&&i)t.hidden=!1,e.replaceWith(...a);else if(!e.parentNode&&!i&&!o)for(let l of a)l.replaceWith(e)}}var tt={select:t=>t.matches("[data-route]"),run:async(t,e)=>{"URLPattern"in window||await import("https://kevinblt.github.io/hec/packages/@hec.js/ui/dist/urlpattnern.min.js");let n=t.dataset.route,r=document.createComment("route: "+n),a=F(t,r,e);$({path:n,update:a,node:t,placeholder:r}),t.removeAttribute("data-group"),t.replaceWith(r)}},et={select:t=>t.matches("[data-match], [href]"),run:t=>{let e=t.dataset.match??"--active",n=o=>o.replace(/index\.*[a-z0-9]*$/gm,"");function r(o){return n(new URL(o,location.href).pathname)}let a=o=>{r(t.getAttribute("href"))==r(o)?t.classList.add(e):t.classList.remove(e)};P.subscribe({next:a}),a(location.pathname),t.removeAttribute("data-match")}};var rt={number:t=>t.valueAsNumber,date:t=>t.valueAsDate,text:t=>t.value,checkbox:t=>t.checked,"":t=>t.value},nt={select:t=>t.matches("[data-bind]"),run:(t,e)=>{let n=t.dataset.bind||t.getAttribute("name"),r=g(e,n);if(r){let a=o=>{t.type=="checkbox"?t.checked=o:t.value=o};a(d(r)),p(r)&&(r.subscribe({next:a}),t.addEventListener("input",()=>r(rt[t.type]?.(t)??t.value)),t.addEventListener("change",()=>r(rt[t.type]?.(t)??t.value)))}}};var A=new WeakSet,ot={select:t=>t.matches("[data-lazy]"),run:(t,e,n)=>{if(A.has(t))return;A.add(t);let r=()=>{t.removeAttribute("data-lazy");for(let a of t.childNodes)b(a,e)};S(t).then(r),n()}};var O=new WeakSet,at={select:t=>t.matches("[data-include]"),run:(t,e)=>{if(O.has(t)||t.children.length)return;O.add(t);let n=async()=>{t.dispatchEvent(new CustomEvent("::load",{bubbles:!0})),t.classList.add("--loading");let r=await fetch(t.dataset.include,{headers:{accept:"text/html,text/*"}});if(r.ok){let a=await r.text(),o=document.createElement("div");t.dispatchEvent(new CustomEvent("::loaded",{bubbles:!0})),o.innerHTML=a;for(let i of o.childNodes)b(i,e);"group"in t.dataset?t.replaceWith(...o.childNodes):t.append(...o.childNodes),t.removeAttribute("data-include"),t.removeAttribute("data-lazy"),t.removeAttribute("data-group"),t.classList.remove("--loading")}};t.hasAttribute("data-lazy")?(A.add(t),S(t).then(n)):n()}};var it=new WeakSet,st={select:t=>t.matches("[data-for]"),run:(t,e,n)=>{if(it.has(t))return;let r=t.dataset.for.replace("let","").split("of"),a=r[0].split(","),o=r.at(-1).trim(),i=a[0].trim()==o?"__e":a[0].trim(),l=a[1]?.trim()??"__i",s=g(e,o),c=document.createComment(t.dataset.for);t.replaceWith(c),O.add(t);let u=()=>{let f=c;for(;(f=f.nextSibling)&&((f instanceof HTMLElement||f instanceof SVGElement)&&f.dataset.for==t.dataset.for);)f=f.previousSibling,f.nextSibling.remove()},m=f=>{if(u(),!f||!f[Symbol.iterator])return console.warn("data-for: The value given is not iterable.",{key:o,value:f});for(let x=0,z=c;x<f.length;x++){let R=t.cloneNode(!0),dt=Object.assign({},e,{[i]:f[x],[l]:x});it.add(R),z.after(R),b(R,dt),z=z.nextSibling}};queueMicrotask(()=>m(d(s))),p(s)&&s.subscribe({next:m}),n()}};var ct={select:t=>Object.keys(t.dataset).some(e=>e.startsWith("on.")),run:(t,e)=>{for(let n in t.dataset)n.startsWith("on.")&&t.addEventListener(n.split(".")[1],g(e,t.dataset[n]))}};var lt=new WeakSet,ut={select:t=>t.matches(_),run:(t,e)=>{let n=t.dataset.component??t.dataset.view??t.dataset.page;if(lt.has(t)||!t.parentNode)return;lt.add(t);let r=async()=>{if(!k.has(n))return U("::component/"+n,r);t.removeAttribute("data-lazy"),t.classList.add("--loading"),await k.get(n)(t,e),t.classList.remove("--loading")};t.hasAttribute("data-lazy")?(A.add(t),S(t).then(r)):M(t).then(r)}};var H=[st,ut,Y,tt,at,ct,nt,et,ot];var mt={};function _t(t,e={}){t instanceof URL&&(t=t.host==location.host?t.pathname:t.toString());let n=document.querySelector(`template[name="${t}"]`);if(!n){let r=document.querySelector('head meta[name="template-path"]');return mt[t]??=new Promise(async a=>{n=document.createElement("template"),n.setAttribute("id",t.toString()),n.innerHTML=await fetch(r?.content?.replaceAll("[name]",t.toString())??t).then(o=>o.text()),document.body.append(n),a(n)}),mt[t].then(a=>b(a.content.cloneNode(!0),e))}return b(n.content.cloneNode(!0),e)}function jt(t,e={}){let n=document.createElement("template");return n.dataset.name="anonymous",n.innerHTML=t,b(n.content.cloneNode(!0),e)}function b(t,e={}){let n=(r,a=new WeakSet)=>{let o=!1;if(!a.has(r)){if(r instanceof HTMLElement||r instanceof SVGElement){for(let i of H)i.select(r)&&i.run(r,e,()=>o=!0);if((r.parentNode||!r.dataset.for)&&ft(r,e),o)return}else if(r instanceof Text&&r.textContent.includes("{{")){let i=r.textContent.split(/{{|}}/g);for(let l=0,s=r,c;l<i.length;l++)c=document.createTextNode(i[l]),l%2!=0&&pt(`{{${i[l]}}}`,e,u=>c.data=u),a.add(c),s.after(c),s=c;r.remove()}a.add(r);for(let i of r.childNodes)n(i,a)}};return n(t,new WeakSet),t}var ft=(t,e)=>{let n=t.getAttributeNames();for(let r of n){let a=t.getAttribute(r);a?.includes("{{")&&pt(a,e,o=>{o=o.replace(/ +/," ").trim(),o==="undefined"||o==="null"?t.removeAttribute(r):t.setAttribute(r,o)})}},pt=(t,e,n)=>{let r=t.match(/{{[^}]+}}/g).map(B),a=t,o=()=>{t=a;for(let i of r)t=t.replace(i.text,d(i.value));return t};for(let i of r){let l=null;if(i.prop[i.prop.length-1]===")"){let s=i.prop.split("("),c=g(e,s[1].substring(0,s[1].length-1).trim()),u=s[0].trim();l=g(e,u),l=l(),l.provide(d(c),i.meta),p(c)&&c.subscribe({next:m=>l.provide(d(m),i.meta)})}else l=g(e,i.prop);if(l==null&&console.warn(`{{ ${i.prop} }}: No value for this key`,{key:i.prop,value:l}),p(l)){let s=l;for(let c in i.meta)if(v[c]){let u=v[c];s=s.map(m=>u({value:m,key:i.prop,param:i.meta[c],options:i.meta}))}i.value=s,s.subscribe({next:()=>n(o())})}else{let s=l;for(let c in i.meta)if(v[c]){let u=v[c];s=u({value:d(l),key:i.prop,param:i.meta[c],options:i.meta})}i.value=()=>s}}n(o())};var qt=t=>{let e=document.head.querySelector(`link[rel="preload"][href="${t.href}"]`)??document.createElement("link");Object.assign(e,t),e.rel="preload",document.head.append(e)};for(let t in W)globalThis[t]=W[t];})();
