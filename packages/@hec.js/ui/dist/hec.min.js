(()=>{var yt=Object.create;var I=Object.defineProperty;var wt=Object.getOwnPropertyDescriptor;var vt=Object.getOwnPropertyNames;var At=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty;var St=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var kt=(t,e)=>{for(var n in e)I(t,n,{get:e[n],enumerable:!0})},Et=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of vt(e))!Nt.call(t,a)&&a!==n&&I(t,a,{get:()=>e[a],enumerable:!(r=wt(e,a))||r.enumerable});return t};var Lt=(t,e,n)=>(n=t!=null?yt(At(t)):{},Et(e||!t||!t.__esModule?I(n,"default",{value:t,enumerable:!0}):n,t));var B={};kt(B,{addRoute:()=>R,bindExpressions:()=>v,component:()=>Bt,componentSelector:()=>q,componentUpdate:()=>y,components:()=>L,effect:()=>D,emit:()=>$,executeNodeAttributesTemplate:()=>bt,expression:()=>U,f:()=>d,hasProp:()=>Rt,isSignal:()=>p,isValue:()=>K,memo:()=>Wt,navigate:()=>_t,nodeProps:()=>W,off:()=>Mt,on:()=>_,once:()=>Pt,page:()=>It,pipes:()=>N,plugins:()=>Q,preload:()=>Qt,prop:()=>x,provider:()=>zt,query:()=>tt,resource:()=>Z,resourceBy:()=>Ct,route:()=>O,signal:()=>g,templateByName:()=>Ht,templateByNode:()=>b,templateByString:()=>Ft,view:()=>jt});function U(t){let e=t.matchAll(/([^ {}\s]+)/g),n={meta:{},text:t,prop:null};for(let r of e)if(r[1].includes("=")){let a=r[1].split("=");n.meta[a[0]]=a[1].replaceAll(/'|"/g,"")}else n.prop=r[1];return n}var N={};var G=new WeakMap;function $(t,e=null){document.dispatchEvent(new CustomEvent(t,{detail:e}))}function _(t,e){let n=r=>e(r.detail);G.set(e,n),document.addEventListener(t,n)}function Pt(t){return new Promise(e=>{let n=r=>e(r.detail);document.addEventListener(t,n,{once:!0})})}function Mt(t,e){document.removeEventListener(t,G.get(e))}var J={items:new Map,setItem(t,e){this.items.set(t,e?.toString())},get length(){return this.items.keys().length},key(t){return Array.from(this.items.values()).at(t)},clear(){this.items.clear()},getItem(t){return this.items.get(t)},removeItem(t){this.items.delete(t)}},E=new Map;function Ot(t){try{let e=window[t+"Storage"];return typeof e.length=="number"?e:J}catch{return J}}window.addEventListener("storage",t=>{if(!E.has(t.key))return;let e=E.get(t.key),n=t.storageArea.getItem(t.key);typeof n=="string"&&n!=="undefined"&&e.update(JSON.parse(n))});function g(t=null,e={}){if(e.id&&E.has(e.id)){let s=E.get(e.id);return s(t),s}let n=[],r=e.storage&&Ot(e.storage),a=s=>{t=s,r&&r.setItem(e.id,JSON.stringify(t));for(let u of n)u.next(t)};function o(){return arguments.length&&t!==arguments[0]&&a(arguments[0]),t}let i=(s,u=null)=>{n.push(s),u?.signal.addEventListener("abort",()=>{let l=n.indexOf(s);l>-1&&n.splice(l,1)},{once:!0})};if(r){let s=r.getItem(e.id);a(typeof s=="string"&&s!=="undefined"?JSON.parse(s):t)}let c=Object.assign(o,{id:e.id,storage:e.storage,toString:()=>t?.toString(),set:s=>t=s,update:a,subscribe:i,map:s=>{let u=g(s(t)),l=new AbortController,f=u.subscribe;return i({next:m=>u(s(m))},{signal:l.signal}),Object.assign(u,{set:()=>null,subscribe:(m,h)=>{f(m,h),h?.signal.addEventListener("abort",()=>l.abort())}})},filter:s=>{let u=g(s(t)?t:null);return i({next:l=>s(l)?u(l):null}),Object.assign(u,{set:()=>null})}});return e.id&&E.set(e.id,c),c}function D(t,e=[],n=null){for(let r of e)r.subscribe({next:()=>n=t(n)});return t(n)}function Wt(t,e=[],n=null){let r=g(null);return r(D(a=>r(t(a)),e,n)),r}function Z(t,e=null){let n=g(e),r=g("loaded"),a=async(o=null)=>{if(r()!="pending"){try{r("pending"),n(await t(o)),r("loaded"),delete n.error}catch(i){console.error(i),r("error"),n.error=i}return n()}};return a(),Object.assign(n,{state:r,refetch:a})}function Ct(t,e,n=null){let r=Z(()=>e(d(t)),n);return p(t)&&t.subscribe({next:a=>r.refetch(a)}),r}function p(t){return t&&t.subscribe}function zt(t,e=[]){function n(){let r=g(null),a=null,o=null,i=(c,s)=>{a=c,o=s,r(t(c,o))};for(let c of e)c.subscribe({next:()=>r(t(a,o))});return Object.assign(r,{provide:i})}return n}var d=t=>typeof t=="function"?d(t()):t;function x(t,e){let n=e?.split(".");if(!e)return t;if(!t)return null;for(let r of n){if(["state"].includes(r)&&t?.state)return t[r];if(p(t)){let a=t()?.[r];if(p(a)){let o=new AbortController,i=g(a());a.subscribe({next:i},{signal:o.signal});let c=s=>{o.abort(),p(s[r])?(o=new AbortController,s[r].subscribe({next:i},{signal:o.signal}),i(s[r]())):i(s[r])};t.subscribe({next:c}),t=i}else t=t.map(o=>o&&o[r])}else if(typeof t=="function")t=d(t);else if(typeof t[r]<"u")typeof t[r]=="function"&&!p(t[r])?t=t[r].bind(t):t=t[r];else return}return t}function Rt(t,e){let n=e.split(".");if(!e||!t)return!1;for(let r of n){if(["loading","error"].includes(r)&&t?.loading&&t?.error)return t[r];if(typeof t=="function")t=d(t);else if(typeof t[r]<"u")t=t[r];else return!1}return!0}var q="[data-component], [data-view], [data-page]",L=new Map,K=t=>t!=null,y=new WeakMap,Tt=new MutationObserver(t=>{for(let e of t)y.has(e.target)&&y.get(e.target)(e.attributeName)});function V(t,e,n){L.set(t,async(r,a)=>{let o={},i=Array.from(r.childNodes),c=(l,f)=>({number:parseFloat,boolean:h=>h===!0||h==="true"})[typeof e[l]]?.(f)??f,s=l=>{let f=r.getAttribute(l);for(let m in o)m.toLowerCase()==l&&o[m](c(m,f))};for(let l in e){let f=r.getAttribute(l)??e[l];if(typeof f=="string"&&f.startsWith("@")){let m=x(a,f.substring(1));o[l]=p(m)?m:g(m)}else o[l]=g(c(l,f)),o[l].subscribe({next:m=>K(m)?r.setAttribute(l,m):r.removeAttribute(l)})}Tt.observe(r,{attributeFilter:Object.keys(e).map(l=>l.toLowerCase())}),y.set(r,s);let u=n(o,r);if(u instanceof Promise&&(u=await u),r.append(u),i.length){let l=r.querySelector("slot"),f=document.createComment("children/"),m=document.createComment("/children");if(l){for(let h of i)h instanceof Element&&l.getAttributeNames().forEach(A=>h.setAttribute(A,l.getAttribute(A)));l.replaceWith(f,...i,m)}else r.append(f,...i);for(let h of i)b(h,Object.assign({},a,W.get(u)))}r.dispatchEvent(new CustomEvent("::mount"))}),$("::component/"+t)}var Bt=(t,e,n)=>V(`component/${t}`,e,n),jt=(t,e,n)=>V(`view/${t}`,e,n),It=(t,e,n)=>V(`page/${t}`,e,n);var P=new WeakMap,M=new WeakMap,X=new IntersectionObserver(t=>{for(let e of t)if(e.isIntersecting&&P.has(e.target))for(let n of P.get(e.target))n(),P.delete(e.target),X.unobserve(e.target)},{rootMargin:"256px"});new MutationObserver(t=>{for(let e of t){let n=a=>{for(let o of a){if(y.has(o)&&o.dispatchEvent(new CustomEvent("::mount")),M.has(o)){let i=M.get(o);for(;i.length;)i.shift()();M.delete(o)}n(o.childNodes)}},r=a=>{for(let o of a)y.has(o)&&o.dispatchEvent(new CustomEvent("::unmount")),r(o.childNodes)};n(e.addedNodes),r(e.removedNodes)}}).observe(document,{childList:!0,subtree:!0});function S(t){return new Promise(e=>{let n=P.get(t)??[];n.push(e),P.set(t,n),X.observe(t)})}function C(t){return new Promise(e=>{let n=M.get(t)??[];t.getRootNode()==document&&queueMicrotask(()=>e()),n.push(e),M.set(t,n)})}var tt=g({}),O=g(location.pathname),et=window.history.pushState,Ut=window.history.replaceState,H={updateQueued:!1},z=document.querySelector('head meta[name="route"]')||document.createElement("meta");z.name="route";z.content=location.pathname;document.head.append(z);var rt=[],Y=new WeakMap;function $t(t,e){let n=Array.from(t.path.matchAll(/\:/g)).length*25,r=Array.from(e.path.matchAll(/\:/g)).length*25;return n+=Array.from(t.path.matchAll(/\*/g)).length*150,r+=Array.from(e.path.matchAll(/\*/g)).length*150,n-r}function _t(t=""){window.history.pushState(null,null,t)}function R(t){let e=t.node,n=t.path,r=t.placeholder,a=e.parentElement??r?.parentElement,o=a?.closest("[data-route]"),i=Y.get(o),c=i?.pattern?.pathname,s=i?.group??rt;if(a?.getRootNode()!==document)return C(r).then(()=>R(t));t.group=[],Y.set(e,t),c&&(n=n=="/"?"":n,n=c.replaceAll(/[^\/a-zA-Z0-9]+$/gm,"")+n.replaceAll(/^[^\/a-zA-Z0-9]+/gm,"")),n=n.replaceAll(/\/+/g,"/").replace(/\/$/m,""),t.pattern=new URLPattern({pathname:n||"/"}),s.push(t),s.sort($t),H.updateQueued||(H.updateQueued=!0,queueMicrotask(w))}function w(t=location.href){t=new URL(t.replace(/index\.*[a-z0-9]*$/gm,""),location.href).toString();let e=!1,n=r=>{let a=!1;for(let o of r){let i=o.pattern.test(t);o.update(!a&&i),!a&&i?(a=!0,o.node.classList.add("--active"),o.group.length?n(o.group):(e=!0,z.content=o.pattern.pathname)):(o.node.classList.remove("--active"),o.node.className||o.node.removeAttribute("class"))}return e};return H.updateQueued=!1,n(rt)?(O(t),tt(Object.fromEntries(new URLSearchParams(location.search)))):w(O()),e}var qt=t=>{let e=t.target.closest("a"),n=e?.href,r=new URL(n,location.href);n&&!e.hasAttribute("download")&&r.hostname==location.hostname&&w(n)&&(et.call(window.history,null,null,n),t.preventDefault())};window.addEventListener("popstate",()=>w());window.addEventListener("hashchange",()=>w());window.addEventListener("click",qt);window.history.pushState=function(e,n,r){et.call(window.history,e,n,r),w(r.toString())};window.history.replaceState=function(e,n,r){Ut.call(window.history,e,n,r),w(r.toString())};var nt={select:t=>t.matches("[data-if], [data-if-not]"),run:(t,e)=>{let n=t.dataset.if||t.dataset.ifNot,r=!!t.dataset.ifNot,a=document.createComment((r?"if not:":"if: ")+n),o=F(t,a,e,r);t.replaceWith(a),t.removeAttribute("data-group"),v(n,e,o,!1)}};function Vt(t,e){if("group"in t.dataset&&t instanceof HTMLTemplateElement){let n=Array.from(t.content.childNodes);for(let r of n)b(r,e);return n}return[t]}function F(t,e,n,r=!1){let a=Vt(t,n),o=!!t.closest("head");return i=>{if(i=r?!i:i,!t.parentNode&&i)t.hidden=!1,e.replaceWith(...a);else if(!e.parentNode&&!i&&!o)for(let c of a)c.replaceWith(e)}}var at={select:t=>t.matches("[data-route]"),run:async(t,e)=>{"URLPattern"in window||await import("https://kevinblt.github.io/hec/packages/@hec.js/ui/dist/urlpattnern.min.js");let n=t.dataset.route,r=document.createComment("route: "+n),a=F(t,r,e);R({path:n,update:a,node:t,placeholder:r}),t.removeAttribute("data-group"),t.replaceWith(r)}},ot={select:t=>t.matches("[data-match], [href]"),run:t=>{if(!t.parentNode||t.hasAttribute("download"))return;let e=t.dataset.match??"--active",n=o=>o.replace(/index\.*[a-z0-9]*$/gm,"");function r(o){return n(new URL(o,location.href).pathname)}let a=o=>{r(t.getAttribute("href"))==r(o)?t.classList.add(e):(t.classList.remove(e),t.className||t.removeAttribute("class"))};O.subscribe({next:a}),queueMicrotask(()=>a(location.pathname)),t.removeAttribute("data-match")}};var st={number:t=>t.valueAsNumber,date:t=>t.valueAsDate,text:t=>t.value,checkbox:t=>t.checked,"":t=>t.value},it={select:t=>t.matches("[data-bind]"),run:(t,e)=>{let n=t.dataset.bind||t.getAttribute("name"),r=x(e,n);if(r){let a=o=>{t.type=="checkbox"?t.checked=o:t.value=o};a(d(r)),p(r)&&(r.subscribe({next:a}),t.addEventListener("input",()=>r(st[t.type]?.(t)??t.value)),t.addEventListener("change",()=>r(st[t.type]?.(t)??t.value)))}}};var k=new WeakSet,ct={select:t=>t.matches("[data-lazy]"),run:(t,e,n)=>{if(k.has(t))return;k.add(t);let r=()=>{t.removeAttribute("data-lazy");for(let a of t.childNodes)b(a,e)};S(t).then(r),n()}};var T=new WeakSet,lt={select:t=>t.matches("[data-include]"),run:(t,e)=>{if(T.has(t)||t.children.length)return;T.add(t);let n=async()=>{t.dispatchEvent(new CustomEvent("::load",{bubbles:!0})),t.setAttribute("data-loading",t.dataset.include);let r=await fetch(t.dataset.include,{headers:{accept:"text/html,text/*"}});if(r.ok){let a=await r.text(),o=document.createElement("div");t.dispatchEvent(new CustomEvent("::loaded",{bubbles:!0})),o.innerHTML=a;for(let i of o.childNodes)b(i,e);"group"in t.dataset?t.replaceWith(...o.childNodes):t.append(...o.childNodes),t.removeAttribute("data-include"),t.removeAttribute("data-lazy"),t.removeAttribute("data-group"),t.removeAttribute("data-loading"),t.className||t.removeAttribute("class")}};t.hasAttribute("data-lazy")?(k.add(t),S(t).then(n)):n()}};var ut=new WeakSet,mt={select:t=>t.matches("[data-for]"),run:(t,e,n)=>{if(ut.has(t))return;let r=t.dataset.for.replace("let","").split("of"),a=r[0].split(","),o=r.at(-1).trim(),i=a[0].trim()==o?"__e":a[0].trim(),c=a[1]?.trim()??"__i",s=x(e,o),u=document.createComment(t.dataset.for);t.replaceWith(u),T.add(t);let l=()=>{let m=u;for(;(m=m.nextSibling)&&((m instanceof HTMLElement||m instanceof SVGElement)&&m.dataset.for==t.dataset.for);)m=m.previousSibling,m.nextSibling.remove()},f=m=>{if(l(),!m||!m[Symbol.iterator])return console.warn("data-for: The value given is not iterable.",{key:o,value:m});for(let h=0,A=u;h<m.length;h++){let j=t.cloneNode(!0),xt=Object.assign({},e,{[i]:m[h],[c]:h});ut.add(j),A.after(j),b(j,xt),A=A.nextSibling}};queueMicrotask(()=>f(d(s))),p(s)&&s.subscribe({next:f}),n()}};var ft={select:t=>Object.keys(t.dataset).some(e=>e.startsWith("on.")),run:(t,e)=>{for(let n in t.dataset)if(n.startsWith("on.")){let r=t.dataset[n];t.removeAttribute(n),t.addEventListener(n.split(".")[1],x(e,r))}}};var pt=new WeakSet,dt={select:t=>t.matches(q),run:(t,e,n)=>{let r="component"in t.dataset?"component":"view"in t.dataset?"view":"page",a=`${r}/${t.dataset[r]}`;if(pt.has(t)||!t.parentNode)return;pt.add(t);let o=async()=>{if(!L.has(a))return _("::component/"+a,o);t.removeAttribute("data-lazy"),t.setAttribute("data-loading",a),await L.get(a)(t,e),t.removeAttribute("data-loading")};t.hasAttribute("data-lazy")?(k.add(t),S(t).then(o)):C(t).then(o),n()}};var ht={select:t=>Object.keys(t.dataset).some(e=>e.startsWith("class.")),run:(t,e)=>{if(!t.parentNode)return;let n=(r,a)=>{r?t.classList.add(a):(t.classList.remove(a),t.className||t.removeAttribute("class"))};for(let r of t.getAttributeNames())if(r.startsWith("data-class.")){let a=r.split(".")[1],o=t.getAttribute(r);t.removeAttribute(r),v(o,e,i=>n(i,a),!1)}}};var Q=[mt,dt,nt,at,lt,ft,ht,it,ot,ct];var gt={},W=new WeakMap;function Ht(t,e={}){t instanceof URL&&(t=t.host==location.host?t.pathname:t.toString());let n=document.querySelector(`template[name="${t}"]`);if(!n){let r=document.querySelector('head meta[name="template-path"]');return gt[t]??=new Promise(async a=>{n=document.createElement("template"),n.setAttribute("id",t.toString()),n.innerHTML=await fetch(r?.content?.replaceAll("[name]",t.toString())??t).then(o=>o.text()),document.body.append(n),a(n)}),gt[t].then(a=>b(a.content.cloneNode(!0),e))}return b(n.content.cloneNode(!0),e)}function Ft(t,e={}){let n=document.createElement("template");return n.innerHTML=t,b(n.content.cloneNode(!0),e)}function b(t,e={}){W.set(t,e);let n=(r,a=new WeakSet)=>{let o=!1;if(!a.has(r)){if(r instanceof HTMLElement||r instanceof SVGElement){for(let i of Q)i.select(r)&&i.run(r,e,()=>o=!0);if((r.parentNode||!r.dataset.for)&&bt(r,e),o)return}else if(r instanceof Text&&r.textContent.includes("{{")){let i=r.textContent.split(/{{|}}/g);for(let c=0,s=r,u;c<i.length;c++)u=document.createTextNode(i[c]),c%2!=0&&v(`{{${i[c]}}}`,e,l=>u.data=l),a.add(u),s.after(u),s=u;r.remove()}a.add(r);for(let i of r.childNodes)n(i,a)}};return n(t,new WeakSet),t}var bt=(t,e)=>{let n=t.getAttributeNames();for(let r of n){let a=t.getAttribute(r);a?.includes("{{")&&v(a,e,o=>{o=o.replace(/ +/," ").trim(),o==="undefined"||o==="null"?t.removeAttribute(r):t.setAttribute(r,o)})}},v=(t,e,n,r=!0)=>{let a=t.match(/{{[^}]+}}/g)?.map(U)??[],o=t;!r&&!a.length&&(a=[{prop:t,meta:{}}]);let i=()=>{t=o;for(let c of a)t=t.replace(c.text,d(c.value));return t};for(let c of a){let s=null;if(c.prop?.[c.prop.length-1]===")"){let u=c.prop.split("("),l=x(e,u[1].substring(0,u[1].length-1).trim()),f=u[0].trim();s=x(e,f),s=s(),s.provide(d(l),c.meta),p(l)&&l.subscribe({next:m=>s.provide(d(m),c.meta)})}else s=x(e,c.prop);if(s==null&&!Object.keys(c.meta).length&&console.warn(`{{ ${c.prop} }}: No value for this key`,{key:c.prop,value:s}),p(s)){let u=s;for(let l in c.meta)if(N[l]){let f=N[l];u=u.map(m=>f({value:m,key:c.prop,param:c.meta[l],options:c.meta}))}c.value=u,u.subscribe({next:l=>n(r?i():l)}),!r&&s.update(d(s))}else{let u=s;for(let l in c.meta)if(N[l]){let f=N[l];u=f({value:d(s),key:c.prop,param:c.meta[l],options:c.meta})}c.value=()=>u,!r&&n(u)}}r&&n(i())};var Qt=t=>{let e=document.head.querySelector(`link[rel="preload"][href="${t.href}"]`)??document.createElement("link");Object.assign(e,t),e.rel="preload",document.head.append(e)};for(let t in B)globalThis[t]=B[t];})();
